# 内容结构计划 - 金价追踪应用

## 1. 材料清单

### 内容文件
- `docs/research/international_sources/international_gold_sources.md` (280行，约15000字，章节：执行摘要、LBMA、COMEX、SGE、第三方API、技术集成)
- `docs/research/jewelry_sources/jewelry_gold_sources.md` (307行，约16000字，章节：品牌金价、第三方聚合、交易所与银行、反爬策略)
- `docs/research/email_service/email_service_analysis.md` (281行，约14000字，章节：邮件服务方案、ESP对比、模板设计、调度策略、送达率)

### 视觉资产
- `browser/screenshots/` (18张截图：周大福、周生生、中国黄金、金价查询网等页面)
- 截图用途：参考页面结构与数据字段，非直接使用

### 数据文件
- 无现成数据文件（需开发阶段通过API采集）
- 数据来源：国际交易所（LBMA/COMEX/SGE）+ 品牌官网（周大福/周生生等）+ 第三方聚合平台

### 图表
- 无预制图表（需实时生成）
- 图表需求：价格走势折线图、多源对比柱状图、日内变化曲线

---

## 2. 网站结构

**类型**：SPA（单页应用）

**理由**：
- 功能页面数量：4个核心区块（仪表板、图表、设置、管理）
- 内容量级：数据驱动型应用，内容随API动态加载，非静态长文
- 用户需求：实时监控场景，需要流畅切换视图，避免页面刷新
- 交互特性：图表交互、数据刷新、推送设置调整，SPA体验更佳

**技术验证**：
- ✅ 功能模块≤5个
- ✅ 单一目标用户（金价监控者）
- ✅ 实时性要求高
- ✅ 交互密集型应用

---

## 3. 单页应用功能区块划分

### 区块 1：首页仪表板（Dashboard）
**目的**：用户快速浏览所有关键金价数据

**内容映射**：

| 功能区 | 组件模式 | 数据来源 | 内容提取规则 | 视觉资产 |
|--------|----------|----------|--------------|----------|
| 页面标题 | Hero Section (简化) | - | 固定文案："金价追踪 / Gold Price Tracker" | - |
| 国际金价卡片组 | Data Card Grid (3列) | API实时获取 | LBMA（AM/PM价格）、COMEX（实时期货价格）、SGE（Au99.99收盘价） | - |
| 首饰品牌金价表格 | Data Table | API实时获取 | 周大福/周生生/中国黄金等品牌，字段：品牌、品类、价格（元/克）、更新时间 | - |
| 快速趋势预览 | Mini Chart | API实时获取 | 近24小时价格走势，简化折线图 | - |
| 最后更新时间戳 | Status Bar | 系统时间 | 格式："最后更新：2025-10-27 22:30"，秒级刷新指示器 | - |

**禁止内容**：
- ❌ 设计决策（无"居中"、"阴影"、"圆角"等描述）
- ❌ 装饰性背景图（Swiss Design 无装饰）
- ❌ 具体图片文件名

---

### 区块 2：趋势图表页（Charts）
**目的**：深度分析金价历史走势，支持时间段选择与多源对比

**内容映射**：

| 功能区 | 组件模式 | 数据来源 | 内容提取规则 | 视觉资产 |
|--------|----------|----------|--------------|----------|
| 时间选择器 | Horizontal Tab Bar | 固定选项 | "24小时 / 7天 / 30天 / 3个月 / 1年" | - |
| 数据源筛选 | Checkbox Group | 固定选项 | 国际源：LBMA/COMEX/SGE；品牌源：周大福/周生生等（多选） | - |
| 主图表区域 | Line Chart (ECharts) | API历史数据 | X轴：时间戳，Y轴：价格（元/克或美元/盎司），多条折线对比 | - |
| 数据表格（辅助） | Data Table | API历史数据 | 日期、开盘、收盘、最高、最低、涨跌幅 | - |
| 导出功能 | Button Group | - | "导出CSV / 导出图片" | - |

**图表规范参考**：
- 使用 ECharts 或 Chart.js 库
- 视觉处理：单色折线（黑色/深灰）或双色（涨红跌绿，符合国内习惯）
- 网格辅助线：浅灰#CCCCCC，1px
- 无渐变填充（Swiss Design 禁止渐变）
- 工具提示：悬停显示精确数值

---

### 区块 3：邮件推送设置（Email Settings）
**目的**：配置推送频率、通知偏好、订阅管理

**内容映射**：

| 功能区 | 组件模式 | 数据来源 | 内容提取规则 | 视觉资产 |
|--------|----------|----------|--------------|----------|
| 用户邮箱显示 | Input Field (只读) | 固定值 | yqiubc@connect.ust.hk | - |
| 推送频率选择 | Radio Group | 用户选择 | "实时推送 / 每日摘要 / 每周摘要 / 关闭" | - |
| 价格阈值设置 | Number Input | 用户输入 | "国际金价涨跌超过 ±X% 时推送"，默认±2% | - |
| 品牌监控选择 | Checkbox Group | 用户选择 | 周大福/周生生/中国黄金等（多选），勾选后仅推送该品牌金价变化 | - |
| 推送时间窗口 | Time Range Picker | 用户选择 | "仅在 08:00-22:00 期间推送"，避免夜间打扰 | - |
| 测试推送按钮 | Button | - | "发送测试邮件"，验证配置是否正确 | - |
| 保存按钮 | Primary Button | - | "保存设置" | - |

**参考文档**：
- `docs/research/email_service/email_service_analysis.md` 中的推送频率控制与节流策略
- 邮件服务商：Resend（推荐方案）

---

### 区块 4：数据源管理（Data Source Management）
**目的**：手动刷新、监控数据源状态、查看API可用性

**内容映射**：

| 功能区 | 组件模式 | 数据来源 | 内容提取规则 | 视觉资产 |
|--------|----------|----------|--------------|----------|
| 全局刷新按钮 | Button | - | "刷新所有数据源"，手动触发全量更新 | - |
| 数据源状态表格 | Data Table | API健康检查 | 列：数据源名称、类型（国际/品牌/第三方）、状态（在线/离线/错误）、最后成功时间、延迟（ms） | - |
| 国际源卡片 | Status Card | API实时 | LBMA状态：在线 ✓、上次更新：10:30、延迟：120ms | - |
| 品牌源卡片 | Status Card | API实时 | 周大福状态：在线 ✓、上次更新：22:15、延迟：350ms | - |
| 第三方聚合卡片 | Status Card | API实时 | 金价查询网状态：在线 ✓、上次更新：22:20、延迟：200ms | - |
| 错误日志 | Log Table | 系统日志 | 显示最近50条采集失败记录：时间、数据源、错误类型、错误信息 | - |
| 自动刷新设置 | Toggle + Number Input | 用户配置 | "启用自动刷新 / 刷新间隔：60秒" | - |

**参考文档**：
- `docs/research/international_sources/international_gold_sources.md`（API可用性评估）
- `docs/research/jewelry_sources/jewelry_gold_sources.md`（反爬与采集可行性）

---

## 4. 全局导航结构（SPA内部）

**导航模式**：Fixed Top Navigation（固定顶部横向导航栏）

**导航项**：
1. 仪表板（Dashboard）- 默认首屏
2. 趋势图表（Charts）
3. 邮件设置（Email Settings）
4. 数据源（Data Sources）

**导航切换方式**：点击导航项，平滑过渡到对应功能区块，无页面刷新

**活动状态指示**：当前页面导航项文字下方显示2px下划线（accent color）

---

## 5. 内容分析

### 信息密度
**密度等级**：高（High）

**理由**：
- 数据点数量：国际3大交易所 + 5大首饰品牌 + 多个第三方平台 = 10+数据源
- 实时更新要求：秒级/分钟级刷新
- 图表数据量：历史数据可达数千个数据点（1年以上跨度）
- 表格行数：品牌金价表可能20+行

**密度控制策略**：
- 使用表格而非卡片（Swiss Design 优势）
- 严格网格对齐，利用白空间分隔
- 分页加载（历史数据）
- 折叠/展开次要信息

---

### 内容平衡

| 内容类型 | 数量 | 占比 | 说明 |
|----------|------|------|------|
| 数据表格 | 3大表格 | 50% | 国际金价、品牌金价、数据源状态 |
| 图表/数据可视化 | 2-3个图表 | 30% | 折线图、mini图表 |
| 表单/设置 | 1组表单 | 15% | 邮件推送设置页 |
| 文字说明 | 最少 | 5% | 标题、标签、提示 |

**内容类型判断**：数据驱动型（Data-driven），90%以上为动态数据，极少静态文字

---

## 6. 设计决策边界声明

**本文件仅包含**：
- ✅ 内容映射（哪些数据显示在哪里）
- ✅ 组件模式名称（Data Table、Line Chart、Button）
- ✅ 数据来源路径与提取规则
- ✅ 功能区块划分

**本文件不包含**（留给 design-specification.md）：
- ❌ 视觉样式（颜色、字体、间距）
- ❌ 布局细节（居中、左对齐、网格列数）
- ❌ 交互动画（过渡时长、缓动函数）
- ❌ 组件尺寸（按钮高度、卡片内边距）

---

**文档版本**：1.0  
**创建日期**：2025-10-27  
**目标读者**：前端开发工程师、UI工程师
